language: python
python:
- '3.5'
before_install:
- pip install -r requirements.txt
- git clone https://github.com/alexandrevicenzi/Flex.git
install:
- cp -r themes/templates Flex/templates
- pelican-themes -i Flex/
script:
- make html


deploy:
  provider: s3
  access_key_id: AKIAQZPZYSPLRGXIGTOC
  secret_access_key: $AWS_SECRET_ACCESS_KEY
  bucket: seyiobaweya.tech
  local-dir: output
  region: eu-west-2
  acl: public_read, bucket_owner_full_control
  on:
    repo: seyio91/sample-blog
  skip_cleanup: true
after_deploy:
- aws configure set preview.cloudfront true
- aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_DISTRIBUTION_ID --paths "/*"
