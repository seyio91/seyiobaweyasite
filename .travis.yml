language: python
python:
- '3.5'
before_install:
- pip install -r requirements.txt
- git clone https://github.com/alexandrevicenzi/Flex.git
install:
- cp -r themes/templates Flex/templates
- pelican-themes -i Flex/
script:
- make html


deploy:
  provider: s3
  access_key_id: AKIAQZPZYSPLRGXIGTOC
  secret_access_key: $AWS_SECRET_ACCESS_KEY
  bucket: seyiobaweya.tech
  local-dir: output
  region: eu-west-2
  acl: public_read, bucket_owner_full_control
  on:
    repo: seyio91/sample-blog
  skip_cleanup: true
after_deploy:
- aws configure set preview.cloudfront true
- aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_ID --paths "/*"
env:
  global:
  - secure: QAVNfVhiiXutxj3nVMATbzRB9oHSiSaeVckNElBrNAp0MICRAYCVtYCDsfZd7MXc5oaPC7JgBLYFQ5q8nM5uhuq8LhJYnrieF2yy7rzGM+3zpfPVVUB+QXT4+9F8avGsnuss5mB+vCV8hBz4BkubFYunHtwggAz4PtHVDpexDAUC+KgDivEl8n8+sxt4CedkWXkkpuymTra0gUz0Zb3cABRh7Tl1pLXpfzDSfwuddtBFTGohSS1LwBVCwUnFdkg4ytLVWiFb310Ck6ABdJBJ8+ppcvh8/MetK/Iz+wQzNZhtogAVULcXiBXmv9abvn5FB4RIvTRrrZ4xLjgHBI6OaztPk3kxpY9mdfA9tgNfcniHxouO8+l5Bx6cysN8mChzBoPTDLGgfAmVYNCSc0HHLTqZT32UTwrVB5UYY9olo0bJMpPCJ07wbATQcV8seGKmF6bhcW8pN2yfKnCIUFfulX3I1+605Mekv0ilOYsePWn/HIhru89E7uvwi54+pfXFJ6qHPJ6wovBsCVFV0VQeAOD80xJEFMNzoh6ghXdFNx78XjBgf0Ph1RvnLypy24bA5CUqjm37VuSQK3G2iUUWt2eUNcctdphj5f+TratSNpFaPKf5q6O/tVs7yyHd9nZ3VMzN5q115lfw14Q15EiVY5J8LnqbjDQbX9EwBE/xYms=
  - secure: TW6Ay8oV73CiucNxC5wYRUKbaq2lrygOCZVk3ihH3o4Z5oSiJ83CQRKv2CYJi++WqwL5zgqkzLntNsEvtu9u0IMPLOmQlG/LFGhpnxedb/P1nRyUffsDhSbiyOQdddGrfi2QSyxodPV/tJCJUK83nIXTUYzBJsyavpbNw1hkQVD2pkLgLtomk18ma2fFEI0WZA/LukgNwKy41ttU2WznjhUaoDL0+lT6usNA39DlxltwSbwA3BYv9WTZUcnzft3P73V1A+SPxisE0BFWnffReDVtHl6+ziep6alvO0vrZpaqdZicbfA34WsBLKP4j5FO4CJS1lGwecy+hycX3VtcWakr7msouHCwP9YhNt9ktM6LKpCs7ho0cbx4yk+Vrp/IyY4F4PL4Lr2Ax//E32xMlgrAwY0ZjjVHsdaY7hapaQ1qbYfkTCn9uHcqL4BRrUoA0nwUvS6JVtQJss+4iesWJH8LTrjiIgOjf+hSnTVyKBrwI189b8E+P2pkV5KvEFOeRSoNHzNRekvwIx80oTyr/z2VWBFyaQG5MScFU5rX+xSyVMuSxP1rk3Y5dB7lHPfW28Wo7SuEBkPGk9xVqHC3Xl7tFpnesTHmMWGh/eiiLimientqirv/S2ztjaE3piKI06VdgT6o8KUxdDcTB1GLdHt1poJU+2Rvq8Vqol9Kous=
  - secure: SGXuhpFABl31qsnjovER6pafVC8Zkum4inm4xJND7Xj+M2wQbPsQR6rBcGrWPWNGfV+9mkAJscut4GLX4Ta5VCT2zrmclrw3iSNKEI7EKvd5pJ/qItfwxDqm5b8dxHHOOTFXGydRRoAoy2TWTfDNDS3xpSkJlDnEFpA7HrJiyO+kxfpNp6JnThdtP8B6h5OrCuL/6YYLWViR4jvNSSThoCbecvfw1AxqggbGCiiSk4z90ImS+I1MYMO0BzOUxk256WXt6NjShpQW3fp/74JyYCuZ/ERLLarYwRDZW/sMHESH0/tqY72koITIngzfSAE0LVYW/cqGqjHD6jfIxD4QiJ2ldBs5yDMgwEH4eCgqaI9t8milE8M6eKsrMumcI18aC0m8YD+Eag4eGfKJUXXp1Q9tad6LqrN8Cx6AeXvBHVy8IW90IFvz9Sfl8y5KY2ZPBtXqibbri18VffgCkliAvEXbrp/Pyz5s13dach4m8mVBXZJFkm223shZl7WhhynbCy1YtBVbCntrsUA86wMf3aP7tuf/CQUqpsmPQCQEcmVo7ofMkwXyv6wnDm71V4SMTsMvXFgkERqbEMoKHmQMNHSEalzTz0eRT8wVsh3z3ph5PpKDfzsZwyKK0tSX9wJI7XP0xULvi/emTm9HqtT7zc8QE7GHSG9hTXkCL8q+24o=
